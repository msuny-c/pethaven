{
  "info": {
    "_postman_id": "9d3c242e-4d19-4c2e-9b6e-0e16cd5b6c3d",
    "name": "Animal onboarding – coordinator → vet → admin → volunteer",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "description": "Прецедент публикации карточки животного с ролями координатора, ветеринара, администратора и волонтера."
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080"
    },
    {
      "key": "coordinatorToken",
      "value": ""
    },
    {
      "key": "vetToken",
      "value": ""
    },
    {
      "key": "adminToken",
      "value": ""
    },
    {
      "key": "volunteerToken",
      "value": ""
    },
    {
      "key": "candidateToken",
      "value": ""
    },
    {
      "key": "animalId",
      "value": ""
    },
    {
      "key": "animalPhoto",
      "value": ""
    },
    {
      "key": "scheduledAt",
      "value": "2025-12-22T12:00:00Z"
    },
    {
      "key": "shiftDate",
      "value": "2025-12-23"
    },
    {
      "key": "applicationId",
      "value": ""
    },
    {
      "key": "interviewId",
      "value": ""
    },
    {
      "key": "agreementId",
      "value": ""
    },
    {
      "key": "readyForAdoption",
      "value": "true"
    },
    {
      "key": "reportId",
      "value": ""
    },
    {
      "key": "reportFile",
      "value": ""
    },
    {
      "key": "shiftId",
      "value": ""
    },
    {
      "key": "taskId",
      "value": ""
    }
  ],
  "item": [
    {
      "name": "Onboarding (coordinator→vet→admin→volunteer)",
      "item": [
        {
          "name": "Login as admin",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{ \"email\": \"admin@shelter.ru\", \"password\": \"admin123\" }",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "login"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "pm.environment.set('adminToken', json.accessToken);"
                ]
              }
            }
          ]
        },
        {
          "name": "Login as coordinator",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{ \"email\": \"coordinator@shelter.ru\", \"password\": \"coordinator123\" }",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "login"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "pm.environment.set('coordinatorToken', json.accessToken);"
                ]
              }
            }
          ]
        },
        {
          "name": "Login as vet",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{ \"email\": \"vet@shelter.ru\", \"password\": \"vet123\" }",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "login"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "pm.environment.set('vetToken', json.accessToken);"
                ]
              }
            }
          ]
        },
        {
          "name": "Login as volunteer",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{ \"email\": \"volunteer1@shelter.ru\", \"password\": \"volunteer123\" }",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "login"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "pm.environment.set('volunteerToken', json.accessToken);",
                  "pm.environment.set('volunteerId', json.id);"
                ]
              }
            }
          ]
        },
        {
          "name": "Login as candidate",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{ \"email\": \"candidate1@mail.ru\", \"password\": \"candidate123\" }",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "login"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "pm.environment.set('candidateToken', json.accessToken);"
                ]
              }
            }
          ]
        },
        {
          "name": "1) Координатор создаёт карточку",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{coordinatorToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Барни\",\n  \"species\": \"dog\",\n  \"breed\": \"спаниель\",\n  \"ageMonths\": 18,\n  \"gender\": \"male\",\n  \"description\": \"Дружелюбный, любит прогулки\",\n  \"status\": \"quarantine\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/animals",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "animals"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const location = pm.response.headers.get('Location');",
                  "if (location) {",
                  "  const parts = location.split('/');",
                  "  const id = parts[parts.length - 1];",
                  "  pm.environment.set('animalId', id);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "2) Координатор загружает фото",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{coordinatorToken}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "{{animalPhoto}}"
                },
                {
                  "key": "description",
                  "type": "text",
                  "value": "Главное фото"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/animals/{{animalId}}/media",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "animals",
                "{{animalId}}",
                "media"
              ]
            }
          }
        },
        {
          "name": "3) Координатор добавляет заметку и теги",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{coordinatorToken}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "note",
                  "value": "[tag:ласковый] [tag:дети_ok] Дома спокоен, на улице активен",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/animals/{{animalId}}/notes",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "animals",
                "{{animalId}}",
                "notes"
              ]
            }
          }
        },
        {
          "name": "4) Ветеринар добавляет процедуру",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{vetToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"animalId\": {{animalId}},\n  \"procedure\": \"vaccination\",\n  \"description\": \"Вакцинация выполнена\",\n  \"nextDueDate\": \"2025-10-01\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/medical",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "medical"
              ]
            }
          }
        },
        {
          "name": "5) Администратор проверяет карточку",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/animals/{{animalId}}/review?approved=true",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "animals",
                "{{animalId}}",
                "review"
              ],
              "query": [
                {
                  "key": "approved",
                  "value": "true"
                }
              ]
            }
          }
        },
        {
          "name": "6) Координатор публикует карточку",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{coordinatorToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{ \"status\": \"available\" }",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/animals/{{animalId}}/status",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "animals",
                "{{animalId}}",
                "status"
              ]
            }
          }
        },
        {
          "name": "7) Волонтёр добавляет полевую заметку",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{volunteerToken}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "note",
                  "value": "После прогулки расслаблен, не тянет поводок",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/animals/{{animalId}}/notes",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "animals",
                "{{animalId}}",
                "notes"
              ]
            }
          }
        },
        {
          "name": "Volunteer views animal field notes",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{volunteerToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/animals/{{animalId}}/notes",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "animals",
                "{{animalId}}",
                "notes"
              ]
            }
          }
        },
        {
          "name": "Vet views medical records",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{vetToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/medical/animal/{{animalId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "medical",
                "animal",
                "{{animalId}}"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Candidate application flow",
      "item": [
        {
          "name": "Login as candidate",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{ \"email\": \"candidate1@mail.ru\", \"password\": \"candidate123\" }",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "login"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "pm.environment.set('candidateToken', json.accessToken);"
                ]
              }
            }
          ]
        },
        {
          "name": "View animal card",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{candidateToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/animals/{{animalId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "animals",
                "{{animalId}}"
              ]
            }
          }
        },
        {
          "name": "Submit adoption application",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{candidateToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"animalId\": {{animalId}},\n  \"reason\": \"Хочу взять домой, есть опыт\",\n  \"experience\": \"Опыт ухода за собакой 3 года\",\n  \"housing\": \"Квартира, парк рядом\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/adoptions/applications",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "adoptions",
                "applications"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const loc = pm.response.headers.get('Location');",
                  "if (loc) {",
                  "  const parts = loc.split('/');",
                  "  pm.environment.set('applicationId', parts[parts.length-1]);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Candidate views own applications",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{candidateToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/adoptions/applications",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "adoptions",
                "applications"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Interview & decision",
      "item": [
        {
          "name": "Coordinator lists submitted applications",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{coordinatorToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/adoptions/applications?status=submitted",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "adoptions",
                "applications"
              ],
              "query": [
                {
                  "key": "status",
                  "value": "submitted"
                }
              ]
            }
          }
        },
        {
          "name": "Coordinator schedules interview",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{coordinatorToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"applicationId\": {{applicationId}},\n  \"scheduledAt\": \"{{scheduledAt}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/adoptions/interviews",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "adoptions",
                "interviews"
              ]
            }
          }
        },
        {
          "name": "Load interviews for application",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{coordinatorToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/adoptions/applications/{{applicationId}}/interviews",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "adoptions",
                "applications",
                "{{applicationId}}",
                "interviews"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const list = pm.response.json();",
                  "if (Array.isArray(list) && list.length) {",
                  "  pm.environment.set('interviewId', list[0].id);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Candidate confirms interview",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{candidateToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/adoptions/interviews/{{interviewId}}/confirm",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "adoptions",
                "interviews",
                "{{interviewId}}",
                "confirm"
              ]
            }
          }
        },
        {
          "name": "Coordinator completes interview and approves",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{coordinatorToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"interviewId\": {{interviewId}},\n  \"status\": \"completed\",\n  \"notes\": \"Хороший контакт, рекомендую\",\n  \"autoApproveApplicationId\": {{applicationId}}\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/adoptions/interviews",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "adoptions",
                "interviews"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Adoption completion",
      "item": [
        {
          "name": "Coordinator completes adoption (agreement)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{coordinatorToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"applicationId\": {{applicationId}},\n  \"signedDate\": \"2024-12-21\",\n  \"postAdoptionPlan\": \"Фотоотчёт раз в 2 недели\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/adoptions/agreements",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "adoptions",
                "agreements"
              ]
            }
          }
        },
        {
          "name": "Vet confirms ready for adoption",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{vetToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"readyForAdoption\": {{readyForAdoption}}\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/animals/{{animalId}}/medical",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "animals",
                "{{animalId}}",
                "medical"
              ]
            }
          }
        },
        {
          "name": "Candidate cancels application (optional)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{candidateToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"applicationId\": {{applicationId}},\n  \"reason\": \"Передумал\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/adoptions/applications/cancel",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "adoptions",
                "applications",
                "cancel"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Post-adoption reports",
      "item": [
        {
          "name": "Candidate views pending reports",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{candidateToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/reports",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "reports"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const list = pm.response.json();",
                  "const pending = Array.isArray(list) ? list.find(r => r.status === 'pending' || r.status === 'overdue') : null;",
                  "if (pending) pm.environment.set('reportId', pending.id);"
                ]
              }
            }
          ]
        },
        {
          "name": "Candidate submits report",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{candidateToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reportText\": \"Питомец отлично адаптировался\",\n  \"submittedDate\": \"2024-12-21\",\n  \"status\": \"submitted\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/reports/{{reportId}}/submit",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "reports",
                "{{reportId}}",
                "submit"
              ]
            }
          }
        },
        {
          "name": "Candidate uploads report media",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{candidateToken}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "{{reportFile}}"
                },
                {
                  "key": "description",
                  "type": "text",
                  "value": "Фото отчёта"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/reports/{{reportId}}/media",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "reports",
                "{{reportId}}",
                "media"
              ]
            }
          }
        },
        {
          "name": "Coordinator reviews reports",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{coordinatorToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/reports",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "reports"
              ]
            }
          }
        },
        {
          "name": "Volunteer checks overdue reports",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{volunteerToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/reports",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "reports"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Shifts & tasks",
      "item": [
        {
          "name": "Coordinator creates shift",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{coordinatorToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"shiftDate\": \"{{shiftDate}}\",\n  \"shiftType\": \"morning\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/shifts",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "shifts"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "if (json && json.id) pm.environment.set('shiftId', json.id);"
                ]
              }
            }
          ]
        },
        {
          "name": "Coordinator creates task",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{coordinatorToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Уборка вольера\",\n  \"description\": \"Очистить вольер\",\n  \"animalId\": {{animalId}},\n  \"status\": \"open\",\n  \"estimatedShifts\": 1\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/tasks",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "tasks"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "if (json && json.id) pm.environment.set('taskId', json.id);"
                ]
              }
            }
          ]
        },
        {
          "name": "Coordinator assigns task to shift",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{coordinatorToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"taskId\": {{taskId}},\n  \"shiftId\": {{shiftId}},\n  \"progressNotes\": \"Подготовить инвентарь\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/shifts/tasks/assign",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "shifts",
                "tasks",
                "assign"
              ]
            }
          }
        },
        {
          "name": "Volunteer signs up for shift",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{volunteerToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{ \"shiftId\": {{shiftId}} }",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/shifts/signup",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "shifts",
                "signup"
              ]
            }
          }
        },
        {
          "name": "Volunteer completes task",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{volunteerToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{ \"status\": \"completed\" }",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/tasks/{{taskId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "tasks",
                "{{taskId}}"
              ]
            }
          }
        },
        {
          "name": "Coordinator marks attendance",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{coordinatorToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{ \"volunteerId\": {{volunteerId}}, \"status\": \"attended\" }",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/shifts/{{shiftId}}/attendance",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "shifts",
                "{{shiftId}}",
                "attendance"
              ]
            }
          }
        },
        {
          "name": "Volunteer submits shift",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{volunteerToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/shifts/{{shiftId}}/submit",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "shifts",
                "{{shiftId}}",
                "submit"
              ]
            }
          }
        },
        {
          "name": "Coordinator approves shift",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{coordinatorToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{ \"volunteerId\": {{volunteerId}} }",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/shifts/{{shiftId}}/approve",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "shifts",
                "{{shiftId}}",
                "approve"
              ]
            }
          }
        },
        {
          "name": "Volunteer views animal field notes",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{volunteerToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/animals/{{animalId}}/notes",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "animals",
                "{{animalId}}",
                "notes"
              ]
            }
          }
        }
      ]
    }
  ]
}
